{"version":3,"sources":["../../../../server/web/spec-extension/cookies.ts"],"names":["cookie","normalizeCookieOptions","options","Object","assign","maxAge","expires","Date","now","path","serializeValue","value","JSON","stringify","String","serializeExpiredCookie","key","serialize","deserializeCookie","input","headers","get","undefined","split","serializeCookie","join","Cookies","Map","constructor","parsedInput","parse","entries","set","Symbol","for","fromEntries","NextCookies","response","args","getWithOptions","raw","isAlreadyAdded","has","currentCookie","Error","setCookie","filter","startsWith","append","delete","isDeleted","expiredCookie","clear","expiredCookies","Array","from","keys","map"],"mappings":"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"}